### **할 일 관리 앱 (가칭: Mwohaji) - 제품 요구 명세서 (PRD)**

*   **버전:** 1.1
*   **작성일:** 2025년 1월 19일
*   **수정일:** 2025년 1월 19일

#### **1. 개요 (Overview)**

 사용자의 로컬 브라우저 환경에서 완벽하게 독립적으로 작동하는 클라이언트 사이드 할 일 관리 웹 애플리케이션을 개발하는 것을 목표로 한다. 모든 데이터는 사용자의 브라우저(`localStorage`)에 저장되며, 사용자가 직접 데이터를 `.txt` 파일 형태로 백업하고 복원할 수 있는 기능을 제공하여 데이터의 완전한 소유권을 보장한다.

#### **2. 목표 (Goals)**

*   **사용자 목표:**
    *   회원가입 절차 없이 즉시 서비스를 사용하고 싶다.
    *   나의 할 일 데이터가 외부 서버에 저장되지 않고 내 컴퓨터에만 있기를 원한다.
    *   단순하고 직관적인 인터페이스로 빠르게 할 일을 추가, 관리하고 싶다.
    *   내 데이터를 내가 원하는 형식(`.txt`)으로 직접 보관하고 싶다.
    *   마감일이 있는 할 일을 놓치지 않도록 미리 알림을 받고 싶다.
*   **프로젝트 목표:**
    *   안정적이고 확장 가능한 코드 베이스를 구축한다.
    *   빠르고 쾌적한 개발 환경을 조성한다.
    *   Render.com과 같은 정적 사이트 호스팅 플랫폼에 쉽게 배포할 수 있는 순수 클라이언트 앱을 만든다.
    *   MVP(최소 기능 제품)를 빠르게 개발하여 핵심 가치를 검증하고, 향후 기능 확장을 위한 견고한 기반을 마련한다.

#### **3. 사용자 (Target Audience)**

*   개인정보 보호에 민감하여 자신의 데이터를 외부 서비스에 의존하고 싶지 않은 사용자.
*   기술에 익숙하며, 텍스트 파일(.txt) 등으로 자신의 데이터를 직접 편집하고 관리하는 것에 거부감이 없는 사용자.
*   복잡한 협업 기능 없이 개인의 생산성 향상에만 집중하고 싶은 학생, 개발자, 기획자 등.

#### **4. 기능 명세 (Feature Specifications)**

**F-01: 할 일 생성 (Create)**
*   사용자는 메인 화면의 입력 필드에 할 일 내용을 입력하고, 미리 등록된 카테고리 목록에서 카테고리를 선택한 후 '추가' 버튼을 클릭하여 새 할 일을 추가할 수 있다.
*   카테고리를 선택하지 않으면 '일반' 카테고리로 자동 지정된다.
*   새 할 일이 생성될 때, 다음과 같은 정보를 포함하는 객체로 데이터가 구성된다:
    *   `id`: 고유 식별자 (e.g., `Date.now()`)
    *   `text`: 할 일 내용 (string)
    *   `category`: 카테고리 (string, 기본값 `일반`)
    *   `completed`: 완료 여부 (boolean, 기본값 `false`)
    *   `createdAt`: 생성 시각 (Date)
    *   `notificationTime`: 알림 시각 (Date, 선택 사항)
    *   `dueDate`: 마감 시각 (Date, 선택 사항)
    *   `recurring`: 반복 규칙 (string, 기본값 `null`. e.g., 'daily', 'weekly', 'monthly')
    *   `soundEnabled`: 소리 알림 활성화 여부 (boolean, 기본값 `true`)

**F-02: 할 일 조회 및 보기 모드 변경 (Read & Update View Mode)**
*   생성된 모든 할 일은 목록 형태로 화면에 표시된다.
*   사용자는 헤더의 토글 버튼을 이용해 두 가지 보기 모드를 선택할 수 있다.
    *   **프로젝트 보기 (기본 모드):** 할 일을 `category` 속성 기준으로 그룹화하여 표시한다. 각 카테고리명이 제목처럼 보이고, 관련된 할 일들이 그 아래 목록으로 나타난다.
    *   **전체 보기 모드:** 모든 할 일을 카테고리 구분 없이, 생성일이나 마감일 등 단일 기준으로 정렬하여 하나의 목록으로 보여준다.
*   각 할 일 앞에는 체크박스가 존재하며, 클릭 시 `completed` 상태가 `true` ↔ `false`로 전환된다.
*   `completed` 상태가 `true`인 할 일은 시각적으로 구분된다 (e.g., 취소선, 흐린 색상).

**F-03: 할 일 내용 수정 (Update Text)**
*   사용자는 할 일의 텍스트 부분을 더블클릭하여 수정 모드로 진입할 수 있다.
*   수정 모드에서는 텍스트 입력 필드와 카테고리 선택 드롭다운이 함께 표시된다.
*   텍스트 입력 필드에서 'Enter' 키를 누르거나 포커스를 잃으면 내용이 저장된다.
*   카테고리 드롭다운을 변경하면 즉시 저장된다.

**F-04: 할 일 삭제 (Delete)**
*   각 할 일 항목에는 '삭제' 버튼(휴지통 아이콘)이 존재하며, 마우스 호버 시에만 표시된다.
*   삭제 버튼 클릭 시 확인 대화상자가 나타나고, 확인하면 해당 할 일 데이터가 목록에서 즉시 삭제된다.

**F-05: 반복 일정 (Recurring Tasks)**
*   할 일 생성/수정 시 '매일', '매주', '매월' 등의 반복 주기를 설정할 수 있다.
*   반복으로 설정된 할 일을 '완료' 처리하면, 해당 할 일은 삭제되지 않고 `completed` 상태가 다시 `false`로 변경되며, `notificationTime`이 다음 주기로 자동 갱신된다.

**F-06: 데이터 관리 (.txt 파일 입출력)**
*   **내보내기 (Export):**
    *   '내보내기' 버튼(다운로드 아이콘)을 클릭하면 `localStorage`에 저장된 모든 할 일 데이터가 지정된 `.txt` 형식으로 변환된다.
    *   `mwohaji_backup_YYYY-MM-DD.txt` 와 같은 이름의 파일로 사용자 컴퓨터에 다운로드된다.
    *   **개선된 파일 형식:** `[상태] 내용 @cat:카테고리 @notify:YYYY-MM-DD HH:mm @rec:규칙 @id:고유식별자`
        *   예: `[ ] 주간 보고서 작성 @cat:업무 @notify:2024-05-24 09:00 @rec:weekly @id:1640995200000`
        *   `@id` 필드는 데이터 무결성 보장을 위한 숨김 메타데이터로, 가져오기 시에만 사용됨
*   **가져오기 (Import):**
    *   '가져오기' 버튼(업로드 아이콘)을 클릭하면 파일 선택창이 나타난다.
    *   사용자가 유효한 형식의 `.txt` 파일을 선택하면, 프로그램은 파일 내용을 파싱하여 할 일 목록과 카테고리 목록을 생성한다.
    *   가져오기 시, 기존 `localStorage`의 모든 데이터는 새로 가져온 데이터로 **덮어쓰는 것**을 기본 동작으로 한다.

**F-07: 인앱 알림 기능 (In-App Alerts)**
*   **알림 전제 조건:** 모든 알림은 **애플리케이션 웹페이지 탭이 브라우저에 열려 있을 때**만 동작한다.
*   **알림 방식:** 웹사이트 내부의 모달(Modal) 창과 짧은 사운드를 통해 설정된 시간에 할 일을 시작하도록 알린다. **별도의 시스템 권한을 요구하지 않는다.**
*   **알림 시점 및 동작:**
    *   현재 시간이 할 일의 알림 시간(`notificationTime`)에 도달했고, 아직 알림이 울리지 않은 미완료 항목이 발견되면 알림(모달 + 사운드)이 발생한다.
    *   `soundEnabled`가 `false`인 할 일은 소리 없이 모달만 표시된다.
*   **중복 방지:** 한 번 알림이 발생한 할 일은 다시 울리지 않도록 상태를 기록한다.

**F-08: 카테고리 관리 (Manage Categories)**
*   **카테고리 생성:** 사용자는 설정 모달을 통해 새로운 카테고리를 추가할 수 있다.
*   **카테고리 수정:** 기존 카테고리 옆의 수정 버튼(연필 아이콘)을 클릭하여 이름을 변경할 수 있다. 이름이 변경되면 해당 카테고리를 사용하던 모든 할 일에 즉시 반영된다.
*   **카테고리 삭제:** 카테고리 옆의 삭제 버튼(휴지통 아이콘)을 클릭하여 카테고리를 삭제할 수 있다. 삭제 시 해당 카테고리에 속해있던 할 일들은 '일반' 카테고리로 자동 변경된다. '일반' 카테고리는 삭제할 수 없다.

#### **5. 기술 사양 (Technical Specifications)**

#### **5.1. 기술 스택**
*   **코어 기술:** Vanilla JavaScript (**ES2016+** - 필수 요구사항) 
*   **마크업:** HTML5
*   **스타일링:** CSS3 (CSS Grid, Flexbox 활용)
*   **데이터 저장:** Web Storage API (localStorage)
    *   `mwohaji-todos`: 할 일 목록 저장 (JSON 배열)
    *   `mwohaji-categories`: 카테고리 목록 저장 (JSON 배열)
*   **파일 처리:** File API, Blob API
*   **선택적 의존성:** 
    *   Day.js (날짜 처리, 2KB) - 복잡한 반복 일정 계산시에만
    *   DOMPurify (XSS 방지, 45KB) - 추가 보안 강화시에만

#### **5.1.1. Vanilla JS 선택 이유**
*   **제로 의존성:** 라이브러리 업데이트/보안 이슈 없음
*   **초고속 로딩:** 번들 크기 최소화 (전체 앱 < 100KB)
*   **완벽한 호환성:** 모든 모던 브라우저에서 동일한 동작
*   **간단한 배포:** HTML/CSS/JS 파일만으로 완성
*   **프로젝트 적합성:** 단순한 UI, 로컬 저장, 정적 배포에 최적

#### **5.1.2. 코드 구조 및 패턴**
```
프로젝트 구조:
mwohaji/
├── index.html          # 메인 HTML
├── css/
│   └── style.css       # 스타일시트
├── js/
│   ├── app.js          # 메인 애플리케이션
│   ├── storage.js      # localStorage 관리
│   ├── fileHandler.js  # 파일 입출력
│   ├── todoManager.js  # 할 일 CRUD 로직
│   ├── icons.js        # SVG 아이콘 시스템
│   ├── utils.js        # 유틸리티 함수
│   └── security.js     # XSS 방지 함수
└── assets/
    └── sounds/
        └── notification.mp3
```

*   **모듈 패턴:** IIFE 또는 ES6 모듈 사용
*   **이벤트 위임:** 효율적인 이벤트 관리
*   **상태 관리:** 단순한 객체 기반 상태 관리
*   **DOM 조작:** 재사용 가능한 헬퍼 함수 활용

#### **5.2. 브라우저 호환성**
*   Chrome 90+, Firefox 90+, Safari 14+, Edge 90+
*   localStorage 지원 필수 (최소 5-10MB 용량)
*   File API 및 Blob API 지원 필수

#### **5.3. 성능 요구사항**
*   **초기 로딩 시간:** 1초 이내 (바닐라 JS의 이점 활용)
*   **번들 크기:** 전체 앱 100KB 이하 (HTML+CSS+JS 포함)
*   **할 일 추가/수정 반응 시간:** 50ms 이내
*   **대용량 데이터 처리:** 5000개 할 일까지 원활한 동작
*   **메모리 사용량:** 20MB 이하 유지
*   **DOM 조작 최적화:** Virtual DOM 없이도 효율적인 렌더링
*   **localStorage 접근:** 읽기/쓰기 10ms 이내

#### **5.4. 보안 요구사항**

#### **6. MVP 범위에서 제외되는 기능 (Out of Scope for MVP)**

### **7. UI/UX 디자인 원칙 및 레이아웃**

#### **7.1. 디자인 원칙**

*   **미니멀리즘 (Minimalism):** 불필요한 시각적 요소를 최대한 배제하고, 콘텐츠와 기능 자체에 집중한다.
*   **직관성 (Intuitive):** 사용자가 별도의 학습 없이 즉시 사용법을 알 수 있도록, 보편적인 UI 패턴을 사용한다.
*   **빠른 반응성 (Responsive):** 모든 상호작용이 즉각적으로 느껴지도록, 불필요한 애니메이션이나 로딩을 최소화한다.
*   **단일 페이지 애플리케이션 (SPA):** 페이지 이동 없이 한 화면에서 모든 작업을 처리하여 매끄러운 사용자 경험을 제공한다.
*   **접근성 (Accessibility):** WCAG 2.1 AA 기준 준수, 키보드 네비게이션 지원, 스크린 리더 호환성 확보

#### **7.2. 반응형 디자인**

#### **7.3. 색상 및 폰트**

*   **색상 팔레트 (모던 프로덕티비티 테마):**
    *   **배경색:**
        *   메인 배경: `#FAFBFC` (아주 연한 청회색, 눈 피로 감소)
        *   카드/섹션 배경: `#F1F3F5` (구분감 있는 연한 회색)
    *   **텍스트색:**
        *   주요 텍스트: `#343A40` (가독성 높은 진한 차콜)
        *   보조 텍스트: `#6C757D` (부드러운 회색)
    *   **액센트 색상:**
        *   기본 액션: `#4263EB` (차분한 블루, 집중력 향상)
        *   완료/성공: `#51CF66` (직관적인 그린)
        *   마감 임박: `#FFD43B` (주의를 끄는 옐로우)
        *   삭제/위험: `#FF6B6B` (부드러운 레드)
    *   **보더/구분선:** `#E9ECEF` (연한 회색)

*   **색상 사용 가이드:**
    *   완료된 할 일: 그린 계열 + 취소선
    *   마감 임박: 옐로우 배경 + 볼드 텍스트
    *   오늘이 마감: 레드 텍스트
    *   호버 상태: 해당 색상의 10% 진한 버전

*   **폰트:** 
    *   시스템 폰트 스택: `"Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`
    *   한글 최적화 및 크로스 플랫폼 일관성 확보

#### **7.3.1 아이콘 시스템**

*   **아이콘 구현 방식:**
    *   SVG 벡터 이미지 사용 (확장성과 선명도 보장)
    *   CSS 변수를 활용한 동적 색상 변경
    *   접근성을 위한 ARIA 레이블 포함
    *   호버/액티브 상태 인터랙션

*   **아이콘 목록 (`icons.js`에 구현):**
    *   **할 일 관리:**
        *   체크박스 (빈 박스/체크된 박스)
        *   추가 (+)
        *   삭제 (휴지통)
        *   편집 (연필)
    *   **시간/일정:**
        *   알림 설정 (🔔)
        *   반복 (↺)
    *   **데이터 관리:**
        *   가져오기 (↑)
        *   내보내기 (↓)
    *   **보기 모드:**
        *   전체 보기 (격자)
        *   일간 보기 (1)
        *   주간 보기 (7)
        *   월간 보기 (달력)
    *   **기타:**
        *   설정 (톱니바퀴)
        *   닫기 (×)
        *   소리 켜기/끄기

*   **아이콘 크기 규격:**
    *   기본: 24x24px
    *   작은 크기: 16x16px (메타 정보용)
    *   큰 크기: 32x32px (주요 액션용)

*   **아이콘 스타일:**
    *   선 두께: 1.5px (기본) / 2px (강조)
    *   라운드 처리: 2px
    *   최소 여백: 아이콘 크기의 12.5% (패딩)

**7.5. 모달 (Modal) - 신규**
*   **카테고리 관리 모달:**
    *   `[설정]` 버튼 클릭 시 화면 중앙에 나타난다.
    *   현재 등록된 카테고리 목록을 보여준다.
    *   각 카테고리 옆에 `[수정]`, `[삭제]` 버튼이 아이콘 형태로 표시된다.
    *   새 카테고리를 입력하고 추가할 수 있는 입력 필드와 `[추가]` 버튼이 있다.
    *   모달 외부를 클릭하거나 `[닫기]` 버튼으로 닫을 수 있다.

#### **7.4. 화면 레이아웃 및 컴포넌트 구성 (와이어프레임)**

전체 화면은 크게 **헤더(Header)**, **메인(Main)** **사이드바** 부분으로 구성된다.

**1. 헤더 (Header)**
*   **좌측 (신규):** `[설정]` 버튼 (톱니바퀴 아이콘) - 클릭 시 카테고리 관리 모달 표시
*   **중앙:** 보기 모드 토글 버튼 그룹
    *   `[프로젝트별 보기]` / `[전체 보기]` 버튼
    *   *캘린더 기반의 일간/주간/월간 보기는 추후 확장 기능으로 고려*
*   **우측:** 데이터 관리 버튼 그룹
    *   `[가져오기]` 버튼 (업로드 아이콘)
    *   `[내보내기]` 버튼 (다운로드 아이콘)
    

**2. 메인 (Main)**
*   **할 일 입력 폼 (`<TodoInput />`)**
    *   `"새로운 할 일을 추가하세요..."` 라는 Placeholder 텍스트가 있는 입력 필드.
    *   입력 필드 하단 또는 우측에 등록된 카테고리를 선택할 수 있는 드롭다운 메뉴 또는 버튼 그룹이 표시된다.
    *   '추가' 버튼이 명시적으로 존재한다.
    *   알림 설정 및 반복 설정 기능은 2단계 기능으로 고려 (초기 단순화)

*   **할 일 목록 (`<TodoList />`)**
    *   '프로젝트 보기' 모드에서는 카테고리별로 그룹화되어 표시되고, '전체 보기' 모드에서는 모든 할 일이 하나의 목록으로 표시된다.
    *   할 일이 없을 경우: `"첫 할 일을 추가해보세요..."` 와 같은 안내 메시지를 표시.
    *   할 일이 있을 경우: 아래의 `TodoItem` 컴포넌트들을 목록 형태로 나열.

*   **개별 할 일 아이템 (`<TodoItem />`)**
    *   **`[체크박스]`**: 할 일의 완료 여부를 나타냄. 클릭 가능.
    *   **`할 일 텍스트`**: 할 일의 내용.
        *   **완료 시:** 텍스트에 취소선이 그어지고 색상이 연해짐.
        *   **더블클릭 시:** 텍스트 입력 필드와 카테고리 선택 드롭다운이 함께 표시되어 수정 모드로 진입.
    *   **`메타 정보`**: 할 일 텍스트 하단에 작은 글씨나 아이콘으로 표시
        *   카테고리: `업무` (텍스트 태그 형태)
        *   알림 시각: `@notify: 2024-05-24 09:00`
        *   반복: `(매주)` 또는 반복 아이콘 `↺`
    *   **`[소리 토글]`**: 소리 알림 On/Off 토글 버튼 (스피커/음소거 아이콘).
    *   **`[삭제 버튼]`**: 아이템 우측 끝에 휴지통 아이콘 형태로 표시. 마우스를 올렸을 때만 나타나 화면을 깔끔하게 유지.

**3. 사이드바 (Sidebar) - 추후 추가 예정**
*   **시간 관련 유틸리티**
    *   알람시계 (`<AlarmClock />`)
        *   시간 설정 및 알람 관리
        *   반복 알람 설정 가능
    *   타이머 (`<Timer />`) 
        *   카운트다운 타이머
        *   여러 개의 타이머 동시 실행 가능
    *   스톱워치 (`<Stopwatch />`)
        *   시간 측정
        *   랩타임 기록

*   **통계 (`<Statistics />`)**
    *   완료율 차트
    *   반복 일정 현황





### **8. 에러 처리 및 예외 상황 대응**

#### **8.1. localStorage 관련**
*   용량 초과 시: "저장 공간이 부족합니다. 일부 할 일을 삭제하거나 데이터를 내보내주세요."
*   접근 불가 시: "브라우저 설정을 확인해주세요. 시크릿 모드에서는 데이터가 저장되지 않을 수 있습니다."

#### **8.2. 파일 처리 관련**
*   잘못된 파일 형식: "올바른 .txt 파일을 선택해주세요."
*   파일 크기 초과: "파일 크기가 너무 큽니다."
*   파싱 오류: "파일 형식이 올바르지 않습니다. 정확한 백업 파일을 사용해주세요."

#### **8.3. 브라우저 호환성**
*   localStorage 미지원: "이 브라우저는 지원되지 않습니다. 최신 브라우저를 사용해주세요."
*   File API 미지원: "파일 기능을 사용할 수 없습니다. 브라우저를 업데이트해주세요."
